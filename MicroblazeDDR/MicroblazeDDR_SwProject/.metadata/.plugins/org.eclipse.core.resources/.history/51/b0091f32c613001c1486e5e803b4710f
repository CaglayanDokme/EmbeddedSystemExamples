/** Libraries **/
#include "xparameters.h"
#include "xuartlite.h"
#include "xgpio.h"
#include "sleep.h"

/** Hardware Instances **/
XGpio switches;
XUartLite uart;

/** Structure Declarations **/
struct SwithcStatus_t{
	uint8_t sw0 : 1;
	uint8_t sw1 : 1;
	uint8_t sw2 : 1;
	uint8_t sw3 : 1;
	uint8_t /* Reserved */;
};

int main()
{
	/** Initialization **/
	if(XUartLite_Initialize(&uart, XPAR_UART_DEVICE_ID) != XST_SUCCESS)
		while(1);

	if(XGpio_Initialize(&switches, XPAR_GPIO_DEVICE_ID) != XST_SUCCESS)
		while(1);

	/** Variables **/
	uint8_t swStatus = 0, prevSwStatus = 0;			// Status of the switches
	uint8_t txBuffer[6] = {0, 0, 0, 0, '\r', '\n'};	// Message to be sent

	while(1)
	{
		swStatus = XGpio_DiscreteRead(&switches, 1);

		// Check if the value changed
		if(swStatus != prevSwStatus)
		{
			txBuffer[0] =
		}

		if(swStatus != (txBuffer[0] - '0'))	// Conversion to ASCII
		{
			txBuffer[0] = swStatus + '0';	// Conversion to ASCII

			XUartLite_Send(&uart, txBuffer, sizeof(txBuffer));
		}
	}

}
